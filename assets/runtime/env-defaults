#!/bin/bash

DEBUG=${DEBUG:-$DEBUG_ENTRYPOINT}

MATTERMOST_DATA_DIR=${MATTERMOST_DATA_DIR:-$MATTERMOST_HOME/data}

MATTERMOST_NAME=${MATTERMOST_NAME:-Mattermost}
MATTERMOST_SCHEME=${MATTERMOST_SCHEME:-http}
MATTERMOST_HOST=${MATTERMOST_HOST:-localhost}
MATTERMOST_PORT=${MATTERMOST_PORT:-8080}

MATTERMOST_ENABLE_EMAIL_SIGNUP=${MATTERMOST_ENABLE_EMAIL_SIGNUP:-true}
MATTERMOST_SECRET_KEY=${MATTERMOST_SECRET_KEY:-}
MATTERMOST_LINK_SALT=${MATTERMOST_LINK_SALT:-}
MATTERMOST_RESET_SALT=${MATTERMOST_RESET_SALT:-}
MATTERMOST_INVITE_SALT=${MATTERMOST_INVITE_SALT:-}

DB_ADAPTER=${DB_ADAPTER:-}
DB_HOST=${DB_HOST:-}
DB_PORT=${DB_PORT:-}
DB_USER=${DB_USER:-}
DB_PASS=${DB_PASS:-}
DB_NAME=${DB_NAME:-}
DB_ROOT_PASS=${DB_ROOT_PASS:-}
DB_ENCODING=${DB_ENCODING:-}

SMTP_HOST=${SMTP_HOST:-}
SMTP_PORT=${SMTP_PORT:-25}
SMTP_USER=${SMTP_USER:-}
SMTP_PASS=${SMTP_PASS:-}
SMTP_TLS=${SMTP_TLS:-False}
MATTERMOST_EMAIL=${MATTERMOST_EMAIL:-${SMTP_USER}}
MATTERMOST_EMAIL=${MATTERMOST_EMAIL:-example@example.com}

GITLAB_SECRET=${GITLAB_SECRET:-}
GITLAB_ID=${GITLAB_ID:-}
GITLAB_SCOPE=${GITLAB_SCOPE:-}
GITLAB_AUTH_ENDPOINT=${GITLAB_AUTH_ENDPOINT:-}
GITLAB_TOKEN_ENDPOINT=${GITLAB_TOKEN_ENDPOINT:-}
GITLAB_API_ENDPOINT=${GITLAB_API_ENDPOINT:-}

case ${MATTERMOST_HTTPS} in
  true) NGINX_X_FORWARDED_PROTO=${NGINX_X_FORWARDED_PROTO:-https} ;;
  *)    NGINX_X_FORWARDED_PROTO=${NGINX_X_FORWARDED_PROTO:-\$scheme} ;;
esac
